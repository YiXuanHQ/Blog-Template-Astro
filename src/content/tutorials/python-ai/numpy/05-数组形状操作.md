---
title: æ•°ç»„å½¢çŠ¶æ“ä½œ
prevChapter: "python-ai/numpy/04-æ•°ç»„è¿ç®—"
nextChapter: "python-ai/numpy/06-å¹¿æ’­æœºåˆ¶"
parentChapter: "python-ai/numpy/README"
---
# æ•°ç»„å½¢çŠ¶æ“ä½œ

> æŒæ¡æ•°ç»„å½¢çŠ¶çš„å˜æ¢å’Œæ“ä½œ

## ğŸ“š å­¦ä¹ ç›®æ ‡

- æŒæ¡ reshape é‡å¡‘æ•°ç»„
- ç†è§£ravelå’Œflattençš„åŒºåˆ«
- æŒæ¡æ•°ç»„çš„è½¬ç½®
- å­¦ä¼šæ•°ç»„çš„è¿æ¥å’Œåˆ†å‰²

## 1. reshape - é‡å¡‘

```python
import numpy as np

# ä¸€ç»´åˆ°äºŒç»´
arr = np.arange(12)
arr_2d = arr.reshape(3, 4)
print(arr_2d)

# å¤šç»´è½¬æ¢
arr_3d = arr.reshape(2, 2, 3)
print(arr_3d.shape)  # (2, 2, 3)

# è‡ªåŠ¨æ¨æ–­ç»´åº¦ï¼ˆ-1ï¼‰
arr_2d = arr.reshape(3, -1)  # è‡ªåŠ¨è®¡ç®—åˆ—æ•°
print(arr_2d.shape)  # (3, 4)

# reshapeä¸æ”¹å˜åŸæ•°ç»„
print(arr.shape)  # (12,)
```

## 2. ravelå’Œflatten

```python
arr = np.array([[1, 2, 3], [4, 5, 6]])

# ravel - è¿”å›è§†å›¾
arr_ravel = arr.ravel()
print(arr_ravel)  # [1 2 3 4 5 6]
arr_ravel[0] = 100
print(arr[0, 0])  # 100ï¼ˆåŸæ•°ç»„è¢«ä¿®æ”¹ï¼‰

# flatten - è¿”å›å‰¯æœ¬
arr_flatten = arr.flatten()
arr_flatten[0] = 999
print(arr[0, 0])  # 100ï¼ˆåŸæ•°ç»„ä¸å˜ï¼‰
```

## 3. è½¬ç½®

```python
arr = np.array([[1, 2, 3], [4, 5, 6]])

# ä½¿ç”¨Tå±æ€§
print(arr.T)
# [[1 4]
#  [2 5]
#  [3 6]]

# ä½¿ç”¨transposeå‡½æ•°
print(arr.transpose())

# å¤šç»´è½¬ç½®
arr_3d = np.arange(24).reshape(2, 3, 4)
print(arr_3d.transpose(2, 0, 1).shape)  # (4, 2, 3)
```

## 4. æ•°ç»„è¿æ¥

```python
# concatenate
a = np.array([[1, 2], [3, 4]])
b = np.array([[5, 6], [7, 8]])

# å‚ç›´è¿æ¥ï¼ˆaxis=0ï¼‰
v_stack = np.concatenate([a, b], axis=0)
print(v_stack)
# [[1 2]
#  [3 4]
#  [5 6]
#  [7 8]]

# æ°´å¹³è¿æ¥ï¼ˆaxis=1ï¼‰
h_stack = np.concatenate([a, b], axis=1)
print(h_stack)
# [[1 2 5 6]
#  [3 4 7 8]]

# vstackå’Œhstack
print(np.vstack([a, b]))  # å‚ç›´å †å 
print(np.hstack([a, b]))  # æ°´å¹³å †å 

# stack - åˆ›å»ºæ–°ç»´åº¦
stacked = np.stack([a, b])
print(stacked.shape)  # (2, 2, 2)
```

## 5. æ•°ç»„åˆ†å‰²

```python
arr = np.arange(12).reshape(3, 4)

# æ°´å¹³åˆ†å‰²
h_split = np.hsplit(arr, 2)
print(h_split)

# å‚ç›´åˆ†å‰²
v_split = np.vsplit(arr, 3)
print(v_split)

# splitå‡½æ•°
parts = np.split(arr, [1, 3], axis=0)
print(len(parts))  # 3ä¸ªéƒ¨åˆ†
```

## 6. æ·»åŠ å’Œåˆ é™¤ç»´åº¦

```python
arr = np.array([1, 2, 3])

# æ·»åŠ ç»´åº¦
arr_newaxis = arr[np.newaxis, :]
print(arr_newaxis.shape)  # (1, 3)

arr_expand = np.expand_dims(arr, axis=0)
print(arr_expand.shape)  # (1, 3)

# åˆ é™¤ç»´åº¦
arr_squeeze = arr_newaxis.squeeze()
print(arr_squeeze.shape)  # (3,)
```

## 7. å®æˆ˜ç¤ºä¾‹

```python
# æ•°æ®æ‰¹å¤„ç†
images = np.random.rand(100, 28, 28)  # 100å¼ 28x28å›¾åƒ
batch_size = 10
batches = images.reshape(-1, batch_size, 28, 28)
print(f'æ‰¹æ¬¡æ•°: {batches.shape[0]}')

# å›¾åƒé€šé“è½¬æ¢ï¼ˆHWC to CHWï¼‰
image_hwc = np.random.rand(224, 224, 3)
image_chw = image_hwc.transpose(2, 0, 1)
print(f'CHWå½¢çŠ¶: {image_chw.shape}')  # (3, 224, 224)
```

## ç»ƒä¹ é¢˜

1. å°†ä¸€ç»´æ•°ç»„reshapeä¸º5x4çš„äºŒç»´æ•°ç»„
2. è½¬ç½®ä¸€ä¸ª3x4çŸ©é˜µ
3. åˆå¹¶ä¸¤ä¸ªæ•°ç»„å¹¶åˆ†å‰²

---

**ä¸‹ä¸€èŠ‚ï¼š** [å¹¿æ’­æœºåˆ¶](06-å¹¿æ’­æœºåˆ¶.md)
