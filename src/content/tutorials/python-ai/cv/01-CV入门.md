---
title: CV å…¥é—¨
nextChapter: "python-ai/cv/02-å›¾åƒåŸºæœ¬æ“ä½œ"
parentChapter: "python-ai/cv/README"
---
# CV å…¥é—¨

> äº†è§£è®¡ç®—æœºè§†è§‰ï¼Œå¼€å¯CVå­¦ä¹ ä¹‹æ—…

## ğŸ“š å­¦ä¹ ç›®æ ‡

- ç†è§£ä»€ä¹ˆæ˜¯è®¡ç®—æœºè§†è§‰
- äº†è§£CVçš„åº”ç”¨åœºæ™¯
- æŒæ¡OpenCVå®‰è£…
- ç†è§£å›¾åƒåŸºç¡€çŸ¥è¯†
- è¿è¡Œç¬¬ä¸€ä¸ªCVç¨‹åº

## 1. ä»€ä¹ˆæ˜¯è®¡ç®—æœºè§†è§‰

### 1.1 å®šä¹‰

**è®¡ç®—æœºè§†è§‰ï¼ˆComputer Visionï¼ŒCVï¼‰** æ˜¯äººå·¥æ™ºèƒ½çš„é‡è¦åˆ†æ”¯ï¼Œè®©è®¡ç®—æœºèƒ½å¤Ÿç†è§£å’Œå¤„ç†è§†è§‰ä¿¡æ¯ï¼ˆå›¾åƒå’Œè§†é¢‘ï¼‰ã€‚

### 1.2 æ ¸å¿ƒä»»åŠ¡

- **å›¾åƒåˆ†ç±»** - è¯†åˆ«å›¾åƒå†…å®¹
- **ç›®æ ‡æ£€æµ‹** - å®šä½å’Œè¯†åˆ«ç‰©ä½“
- **å›¾åƒåˆ†å‰²** - åˆ†å‰²å›¾åƒåŒºåŸŸ
- **äººè„¸è¯†åˆ«** - è¯†åˆ«äººè„¸èº«ä»½
- **å§¿æ€ä¼°è®¡** - è¯†åˆ«äººä½“å§¿æ€
- **å›¾åƒç”Ÿæˆ** - ç”Ÿæˆæ–°å›¾åƒ

## 2. CV åº”ç”¨åœºæ™¯

### 2.1 å®‰é˜²ç›‘æ§

```python
# äººè„¸è¯†åˆ«é—¨ç¦
# å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
# è½¦ç‰Œè¯†åˆ«
```

### 2.2 è‡ªåŠ¨é©¾é©¶

```python
# è½¦é“çº¿æ£€æµ‹
# è¡Œäººæ£€æµ‹
# äº¤é€šæ ‡å¿—è¯†åˆ«
# éšœç¢ç‰©è¯†åˆ«
```

### 2.3 åŒ»ç–—å½±åƒ

```python
# Xå…‰å›¾åƒåˆ†æ
# CT/MRIæ‰«æ
# ç—…ç¶æ£€æµ‹
# è¾…åŠ©è¯Šæ–­
```

## 3. å®‰è£… OpenCV

### 3.1 å®‰è£…

```bash
# åŸºç¡€ç‰ˆæœ¬
pip install opencv-python

# å®Œæ•´ç‰ˆæœ¬ï¼ˆåŒ…å«é¢å¤–æ¨¡å—ï¼‰
pip install opencv-contrib-python

# éªŒè¯å®‰è£…
python -c "import cv2; print(cv2.__version__)"
```

### 3.2 å…¶ä»–ä¾èµ–

```bash
pip install numpy
pip install matplotlib
pip install pillow
```

## 4. å›¾åƒåŸºç¡€çŸ¥è¯†

### 4.1 å›¾åƒè¡¨ç¤º

```python
import cv2
import numpy as np

# å›¾åƒæœ¬è´¨æ˜¯æ•°ç»„
# ç°åº¦å›¾: (height, width)
# å½©è‰²å›¾: (height, width, 3) - BGR

# åˆ›å»ºçº¯è‰²å›¾åƒ
img = np.zeros((100, 100, 3), dtype=np.uint8)
img[:, :] = (255, 0, 0)  # è“è‰²

cv2.imshow('Blue Image', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 4.2 è‰²å½©ç©ºé—´

```python
# BGR - OpenCVé»˜è®¤æ ¼å¼
# RGB - æ ‡å‡†æ ¼å¼
# HSV - è‰²è°ƒã€é¥±å’Œåº¦ã€äº®åº¦
# Gray - ç°åº¦å›¾

# BGRè½¬RGB
rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# BGRè½¬ç°åº¦
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# BGRè½¬HSV
hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
```

## 5. ç¬¬ä¸€ä¸ª CV ç¨‹åº

### 5.1 è¯»å–å’Œæ˜¾ç¤ºå›¾åƒ

```python
import cv2

# è¯»å–å›¾åƒ
img = cv2.imread('image.jpg')

# æ£€æŸ¥æ˜¯å¦æˆåŠŸ
if img is None:
    print("æ— æ³•è¯»å–å›¾åƒ")
else:
    print(f"å›¾åƒshape: {img.shape}")
    print(f"å›¾åƒç±»å‹: {img.dtype}")
    
    # æ˜¾ç¤ºå›¾åƒ
    cv2.imshow('Image', img)
    cv2.waitKey(0)
    cv2.destroyAllWindows()
```

### 5.2 å›¾åƒå¤„ç†

```python
# è½¬æ¢ä¸ºç°åº¦å›¾
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# é«˜æ–¯æ¨¡ç³Š
blurred = cv2.GaussianBlur(gray, (5, 5), 0)

# Cannyè¾¹ç¼˜æ£€æµ‹
edges = cv2.Canny(blurred, 50, 150)

# æ˜¾ç¤ºç»“æœ
cv2.imshow('Original', img)
cv2.imshow('Gray', gray)
cv2.imshow('Edges', edges)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 5.3 ä¿å­˜å›¾åƒ

```python
# ä¿å­˜å¤„ç†åçš„å›¾åƒ
cv2.imwrite('output_gray.jpg', gray)
cv2.imwrite('output_edges.jpg', edges)

print("å›¾åƒå·²ä¿å­˜")
```

## 6. ä½¿ç”¨ matplotlib æ˜¾ç¤º

```python
import matplotlib.pyplot as plt

# è¯»å–å›¾åƒ
img = cv2.imread('image.jpg')

# OpenCVä½¿ç”¨BGRï¼Œmatplotlibä½¿ç”¨RGB
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# æ˜¾ç¤º
plt.figure(figsize=(10, 5))

plt.subplot(121)
plt.imshow(img_rgb)
plt.title('Original')
plt.axis('off')

plt.subplot(122)
plt.imshow(edges, cmap='gray')
plt.title('Edges')
plt.axis('off')

plt.tight_layout()
plt.show()
```

## 7. æ‘„åƒå¤´é‡‡é›†

```python
# æ‰“å¼€æ‘„åƒå¤´
cap = cv2.VideoCapture(0)

if not cap.isOpened():
    print("æ— æ³•æ‰“å¼€æ‘„åƒå¤´")
    exit()

while True:
    # è¯»å–ä¸€å¸§
    ret, frame = cap.read()
    
    if not ret:
        print("æ— æ³•æ¥æ”¶å¸§")
        break
    
    # è½¬ä¸ºç°åº¦å›¾
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    
    # æ˜¾ç¤º
    cv2.imshow('Camera', frame)
    cv2.imshow('Gray', gray)
    
    # æŒ‰'q'é€€å‡º
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

# é‡Šæ”¾èµ„æº
cap.release()
cv2.destroyAllWindows()
```

## 8. è§†é¢‘å¤„ç†

```python
# è¯»å–è§†é¢‘
cap = cv2.VideoCapture('video.mp4')

# è·å–è§†é¢‘ä¿¡æ¯
fps = cap.get(cv2.CAP_PROP_FPS)
width = int(cap.get(cv2.CAP_PROP_FRAME_WIDTH))
height = int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT))

print(f"FPS: {fps}, Size: {width}x{height}")

# åˆ›å»ºè§†é¢‘å†™å…¥å™¨
fourcc = cv2.VideoWriter_fourcc(*'mp4v')
out = cv2.VideoWriter('output.mp4', fourcc, fps, (width, height))

while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break
    
    # å¤„ç†å¸§
    processed = cv2.Canny(frame, 100, 200)
    processed = cv2.cvtColor(processed, cv2.COLOR_GRAY2BGR)
    
    # å†™å…¥è§†é¢‘
    out.write(processed)
    
    # æ˜¾ç¤º
    cv2.imshow('Frame', processed)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
out.release()
cv2.destroyAllWindows()
```

## 9. å¸¸è§é—®é¢˜

### Q1: å›¾åƒè¯»å–å¤±è´¥ï¼Ÿ

```python
img = cv2.imread('image.jpg')
if img is None:
    print("æ£€æŸ¥:")
    print("1. æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®")
    print("2. æ–‡ä»¶æ˜¯å¦å­˜åœ¨")
    print("3. æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ")
```

### Q2: å›¾åƒæ˜¾ç¤ºé¢œè‰²ä¸å¯¹ï¼Ÿ

```python
# OpenCVä½¿ç”¨BGRï¼Œéœ€è¦è½¬ä¸ºRGB
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
plt.imshow(img_rgb)
```

### Q3: çª—å£ä¸€é—ªè€Œè¿‡ï¼Ÿ

```python
cv2.imshow('Image', img)
cv2.waitKey(0)  # ç­‰å¾…æŒ‰é”®
cv2.destroyAllWindows()  # å…³é—­æ‰€æœ‰çª—å£
```

## 10. ç»ƒä¹ é¢˜

1. è¯»å–ä¸€å¼ å›¾ç‰‡å¹¶æ˜¾ç¤ºå…¶shapeå’Œdtype
2. å°†å½©è‰²å›¾è½¬ä¸ºç°åº¦å›¾å¹¶ä¿å­˜
3. ä½¿ç”¨Cannyè¿›è¡Œè¾¹ç¼˜æ£€æµ‹
4. æ‰“å¼€æ‘„åƒå¤´å¹¶å®æ—¶æ˜¾ç¤º
5. è¯»å–è§†é¢‘å¹¶æå–ç¬¬ä¸€å¸§

## ğŸ’¡ é‡ç‚¹æ€»ç»“

1. **OpenCV** - æœ€æµè¡Œçš„è®¡ç®—æœºè§†è§‰åº“
2. **å›¾åƒè¡¨ç¤º** - NumPyæ•°ç»„ (H, W, C)
3. **è‰²å½©ç©ºé—´** - BGR (OpenCVé»˜è®¤)
4. **åŸºæœ¬æ“ä½œ** - è¯»å–ã€æ˜¾ç¤ºã€ä¿å­˜
5. **å›¾åƒå¤„ç†** - ç°åº¦ã€æ¨¡ç³Šã€è¾¹ç¼˜æ£€æµ‹

---

**ä¸‹ä¸€èŠ‚ï¼š** [å›¾åƒåŸºæœ¬æ“ä½œ](02-å›¾åƒåŸºæœ¬æ“ä½œ.md)
