---
title: æ•°æ®è½¬æ¢
prevChapter: "python-ai/pandas/04-æ•°æ®æ¸…æ´—"
nextChapter: "python-ai/pandas/06-æ•°æ®åˆå¹¶"
parentChapter: "python-ai/pandas/README"
---
# æ•°æ®è½¬æ¢

> æŒæ¡æ•°æ®è½¬æ¢å’Œæ˜ å°„æŠ€å·§

## ğŸ“š å­¦ä¹ ç›®æ ‡

- æŒæ¡æ•°æ®æ˜ å°„
- å­¦ä¼šä½¿ç”¨applyå‡½æ•°
- æŒæ¡æ•°æ®æ›¿æ¢
- å­¦ä¼šæ•°æ®ç¦»æ•£åŒ–
- ç†è§£æ•°æ®æ ‡å‡†åŒ–

## 1. æ•°æ®æ˜ å°„

```python
import pandas as pd

df = pd.DataFrame({
    'grade': ['A', 'B', 'C', 'A', 'B']
})

# ä½¿ç”¨å­—å…¸æ˜ å°„
grade_map = {'A': 90, 'B': 80, 'C': 70}
df['score'] = df['grade'].map(grade_map)

# mapæ–¹æ³•é…åˆå‡½æ•°
df['grade_lower'] = df['grade'].map(lambda x: x.lower())

# replaceæ–¹æ³•
df['grade_numeric'] = df['grade'].replace({'A': 1, 'B': 2, 'C': 3})
```

## 2. applyå‡½æ•°

```python
df = pd.DataFrame({
    'A': [1, 2, 3],
    'B': [4, 5, 6]
})

# å¯¹åˆ—åº”ç”¨å‡½æ•°
df['A_squared'] = df['A'].apply(lambda x: x ** 2)

# å¯¹è¡Œåº”ç”¨å‡½æ•°
df['sum'] = df.apply(lambda row: row['A'] + row['B'], axis=1)

# åº”ç”¨è‡ªå®šä¹‰å‡½æ•°
def classify(value):
    if value > 50:
        return 'High'
    else:
        return 'Low'

df['category'] = df['sum'].apply(classify)

# applymap - å¯¹æ•´ä¸ªDataFrame
df_transformed = df[['A', 'B']].applymap(lambda x: x * 2)
```

## 3. æ•°æ®æ›¿æ¢

```python
df = pd.DataFrame({
    'value': [1, 2, -999, 4, -999]
})

# æ›¿æ¢å•ä¸ªå€¼
df['value'] = df['value'].replace(-999, np.nan)

# æ›¿æ¢å¤šä¸ªå€¼
df['value'] = df['value'].replace({-999: np.nan, -888: np.nan})

# æ¡ä»¶æ›¿æ¢
df.loc[df['value'] < 0, 'value'] = 0
```

## 4. æ•°æ®ç¦»æ•£åŒ–

```python
df = pd.DataFrame({
    'age': [18, 25, 35, 45, 55, 65, 75]
})

# cut - ç­‰å®½åˆ†ç®±
bins = [0, 30, 50, 100]
labels = ['Young', 'Middle', 'Old']
df['age_group'] = pd.cut(df['age'], bins=bins, labels=labels)

# qcut - ç­‰é¢‘åˆ†ç®±
df['age_quartile'] = pd.qcut(df['age'], q=4, labels=['Q1', 'Q2', 'Q3', 'Q4'])

# è‡ªå®šä¹‰åˆ†ç®±
df['age_custom'] = pd.cut(df['age'], 
                          bins=[0, 20, 40, 60, 100],
                          labels=['Teen', 'Adult', 'Middle', 'Senior'])
```

## 5. æ•°æ®æ ‡å‡†åŒ–

```python
from sklearn.preprocessing import StandardScaler, MinMaxScaler

df = pd.DataFrame({
    'value': [10, 20, 30, 40, 50]
})

# Z-scoreæ ‡å‡†åŒ–
df['z_score'] = (df['value'] - df['value'].mean()) / df['value'].std()

# Min-Maxå½’ä¸€åŒ–
df['min_max'] = (df['value'] - df['value'].min()) / (df['value'].max() - df['value'].min())

# ä½¿ç”¨sklearn
scaler = StandardScaler()
df['scaled'] = scaler.fit_transform(df[['value']])
```

## ç»ƒä¹ é¢˜

1. å°†åˆ†æ•°æ˜ å°„ä¸ºç­‰çº§
2. ä½¿ç”¨applyè®¡ç®—BMI
3. å¯¹å¹´é¾„è¿›è¡Œåˆ†ç»„

---

**ä¸‹ä¸€èŠ‚ï¼š** [æ•°æ®åˆå¹¶](06-æ•°æ®åˆå¹¶.md)
