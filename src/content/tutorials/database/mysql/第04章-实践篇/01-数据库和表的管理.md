---
title: 数据库和表的管理
nextChapter: "java-backend/mysql/第04章-实践篇/02-数据查询"
parentChapter: "java-backend/mysql/README"
---
# 数据库和表的管理

> 本章通过实际案例学习MySQL数据库和表的创建、修改、删除等基本管理操作。通过学生信息管理系统的实践，掌握数据库设计和管理的基本技能。

## ⚡ 快速参考

- **数据库操作**：CREATE DATABASE、ALTER DATABASE、DROP DATABASE、SHOW DATABASES
- **表操作**：CREATE TABLE、ALTER TABLE、DROP TABLE、SHOW TABLES、DESC/DESCRIBE
- **数据类型**：数值类型（INT、DECIMAL）、字符串类型（VARCHAR、CHAR）、日期时间类型
- **表结构修改**：ADD COLUMN、MODIFY COLUMN、DROP COLUMN、RENAME COLUMN
- **数据操作**：INSERT、UPDATE、DELETE、SELECT
- **表复制**：CREATE TABLE ... LIKE（复制结构）、CREATE TABLE ... AS SELECT（复制结构和数据）

## 📚 学习目标

1. 掌握数据库的创建、修改和删除操作
2. 熟练使用CREATE TABLE创建数据表，理解各种数据类型的选择
3. 掌握表结构的修改操作（添加、修改、删除列）
4. 掌握数据的插入、更新和删除操作
5. 理解表复制的方法和应用场景
6. 能够根据业务需求设计合理的数据库和表结构

## 实践目标

通过本实践，你将学会：
- ✅ 创建和管理数据库
- ✅ 创建和管理数据表
- ✅ 修改表结构（添加、修改、删除列）
- ✅ 插入、更新、删除数据
- ✅ 复制表结构和数据
- ✅ 删除表和数据库

## 实践环境

**数据库名称：** studentsdb（学生数据库）

**数据表：**
- `student_info`：学生信息表
- `curriculum`：课程表
- `grade`：成绩表

## 实践步骤

### 1. 创建数据库

使用SQL语句创建数据库 `studentsdb`。

```sql
CREATE DATABASE studentsdb;
```

### 2. 选择数据库

使用SQL语句选择 `studentsdb` 为当前使用数据库。

```sql
USE studentsdb;
```

### 3. 创建数据表

使用SQL语句在 `studentsdb` 数据库创建数据表 `student_info`、`curriculum`、`grade`。

#### 3.1 创建学生信息表（student_info）

```sql
CREATE TABLE student_info
(
    学号    CHAR(4) PRIMARY KEY,
    姓名    CHAR(8) NOT NULL,
    性别    CHAR(2),
    出生日期 DATE,
    家族住址 VARCHAR(50)
);

-- 查看表结构
DESC student_info;
```

#### 3.2 创建课程表（curriculum）

```sql
CREATE TABLE curriculum  -- 课程表
(
    课程编号 CHAR(4) PRIMARY KEY,
    课程名称 VARCHAR(50),
    学分     INT
);

-- 查看表结构
DESC curriculum;
```

#### 3.3 创建成绩表（grade）

```sql
CREATE TABLE grade
(
    学号     CHAR(4),
    课程编号 CHAR(4),
    分数     INT,
    PRIMARY KEY(学号, 课程编号)  -- 联合主键
);

-- 查看表结构
DESC grade;
```

### 4. 插入数据

使用SQL语句 `INSERT` 向 `studentsdb` 数据库的 `student_info`、`curriculum`、`grade` 表插入数据。

#### 4.1 插入学生信息

```sql
INSERT INTO student_info(学号, 姓名, 性别, 出生日期, 家族住址)
VALUES
    ('0001', '张青平', '男', '2000-10-01', '衡阳市东风路77号'),
    ('0002', '刘东阳', '男', '1998-12-09', '东阳市八一北路33号'),
    ('0003', '马晓夏', '女', '1995-05-12', '长岭市五一路763号'),
    ('0004', '钱忠理', '男', '1994-09-23', '滨海市洞庭大道279号'),
    ('0005', '孙海洋', '男', '1995-04-03', '长岛市解放路27号'),
    ('0006', '郭小斌', '男', '1997-11-10', '南山市红旗路113号'),
    ('0007', '肖月玲', '女', '1996-12-07', '东方市南京路11号'),
    ('0008', '张玲珑', '女', '1997-12-24', '滨江市新建路97号');

-- 查看插入结果
SELECT * FROM student_info;
```

#### 4.2 插入课程信息

```sql
INSERT INTO curriculum(课程编号, 课程名称, 学分)
VALUES
    ('0001', '计算机应用基础', 2),
    ('0002', 'C语言程序设计', 2),
    ('0003', '数据库原理及应用', 2),
    ('0004', '英语', 4),
    ('0005', '高等数学', 4);

-- 查看插入结果
SELECT * FROM curriculum;
```

#### 4.3 插入成绩信息

```sql
INSERT INTO grade(学号, 课程编号, 分数)
VALUES
    ('0001', '0001', 80),
    ('0001', '0002', 91),
    ('0001', '0003', 88),
    ('0001', '0004', 85),
    ('0001', '0005', 77),
    ('0002', '0001', 73),
    ('0002', '0002', 68),
    ('0002', '0003', 80),
    ('0002', '0004', 79),
    ('0002', '0005', 73),
    ('0003', '0001', 84),
    ('0003', '0002', 92),
    ('0003', '0003', 81),
    ('0003', '0004', 82),
    ('0003', '0005', 75);

-- 查看插入结果
SELECT * FROM grade;
```

### 5. 修改表结构

#### 5.1 修改列属性

使用SQL语句 `ALTER TABLE` 修改 `curriculum` 表的"课程名称"列，使之非空。

```sql
ALTER TABLE curriculum
    MODIFY 课程名称 VARCHAR(50) NOT NULL;

-- 查看修改后的表结构
DESC curriculum;
```

#### 5.2 修改列数据类型

使用SQL语句 `ALTER TABLE` 修改 `grade` 表的"分数"列，使其数据类型为 `DECIMAL(5,2)`。

```sql
ALTER TABLE grade
    MODIFY 分数 DECIMAL(5, 2);

-- 查看修改后的表结构
DESC grade;
```

#### 5.3 添加列

使用SQL语句 `ALTER TABLE` 为 `student_info` 表添加一个名为"备注"的数据列，其数据类型为 `VARCHAR(50)`。

```sql
ALTER TABLE student_info
    ADD 备注 VARCHAR(50);

-- 查看修改后的表结构
DESC student_info;
```

### 6. 复制表

使用SQL语句创建数据库 `studb`，并在此数据库下创建表 `stu`，表结构与数据与 `studentsdb` 的 `student_info` 表相同。

```sql
CREATE DATABASE studb;
USE studb;

-- 复制表结构和数据
CREATE TABLE stu
AS SELECT * FROM studentsdb.student_info;

-- 查看表结构
DESC stu;

-- 查看数据
SELECT * FROM stu;
```

### 7. 删除数据

使用SQL语句删除表 `stu` 中学号为 `0004` 的记录。

```sql
-- 关闭安全模式，然后才能对表进行增删改操作（MySQL 5.7+）
SET SQL_SAFE_UPDATES = 0;

DELETE FROM stu WHERE 学号 = '0004';

-- 查看删除结果
SELECT * FROM stu;

-- 恢复安全模式（可选）
SET SQL_SAFE_UPDATES = 1;
```

### 8. 更新数据

使用SQL语句更新表 `stu` 中学号为 `0002` 的家族住址为"滨江市新建路96号"。

```sql
UPDATE stu
SET 家族住址 = '滨江市新建路96号'
WHERE 学号 = '0002';

-- 查看更新结果
SELECT * FROM stu;
```

### 9. 删除列

删除表 `stu` 的"备注"列。

```sql
ALTER TABLE stu
    DROP COLUMN 备注;

-- 查看删除后的表结构
DESC stu;
```

### 10. 删除表

删除表 `stu`。

```sql
DROP TABLE stu;
```

### 11. 删除数据库

删除数据库 `studb`。

```sql
DROP DATABASE studb;
```

## 实践总结

### 关键知识点

1. **数据库操作**
   - `CREATE DATABASE`：创建数据库
   - `USE`：选择数据库
   - `DROP DATABASE`：删除数据库

2. **表操作**
   - `CREATE TABLE`：创建表
   - `ALTER TABLE`：修改表结构
   - `DROP TABLE`：删除表
   - `CREATE TABLE ... AS SELECT`：复制表

3. **数据操作**
   - `INSERT INTO`：插入数据
   - `UPDATE`：更新数据
   - `DELETE FROM`：删除数据

4. **表结构修改**
   - `MODIFY`：修改列属性
   - `ADD`：添加列
   - `DROP COLUMN`：删除列

### 注意事项

- ⚠️ 删除操作前请确认数据，避免误删
- ⚠️ 修改表结构前建议备份数据
- ⚠️ MySQL 5.7+ 默认开启安全模式，需要 `SET SQL_SAFE_UPDATES = 0` 才能执行不带WHERE的UPDATE/DELETE
- ✅ 使用 `DESC` 或 `DESCRIBE` 查看表结构
- ✅ 使用 `SELECT * FROM 表名` 查看表数据

---

## 练习题

1. 创建一个新的数据库 `test_db`，并在其中创建一个表 `test_table`，包含id、name、age三个字段
2. 向 `test_table` 插入5条测试数据
3. 修改 `test_table` 表，添加一个 `email` 字段
4. 更新 `test_table` 表中id为1的记录的name字段
5. 删除 `test_table` 表中id为5的记录

---

**上一章：** [MySQL管理](/tutorials/java-backend/mysql/第03章-高级篇/09-MySQL管理/)

**下一章：** [数据查询](/tutorials/java-backend/mysql/第04章-实践篇/02-数据查询/) →
