---
title: åŠ¨ç”»åŸºç¡€
date: 2025-01-22
nextChapter: "harmonyos-dev/11-graphics-animation/02-Canvasç»˜å›¾"
parentChapter: "harmonyos-dev/11-graphics-animation/README"
---
# åŠ¨ç”»åŸºç¡€

> æŒæ¡ HarmonyOS åŠ¨ç”»å¼€å‘åŸºç¡€

## ğŸ¬ åŠ¨ç”»ç±»å‹

### HarmonyOS åŠ¨ç”»åˆ†ç±»

```
åŠ¨ç”»ç±»å‹
â”œâ”€ å±æ€§åŠ¨ç”»ï¼ˆanimateToï¼‰
â”œâ”€ æ˜¾å¼åŠ¨ç”»ï¼ˆanimationï¼‰
â”œâ”€ è½¬åœºåŠ¨ç”»ï¼ˆtransitionï¼‰
â””â”€ ç»„ä»¶å†…ç½®åŠ¨ç”»
```

## ğŸ“ å±æ€§åŠ¨ç”»

### animateTo å…¨å±€åŠ¨ç”»

```typescript
@Entry
@Component
struct AnimationDemo {
  @State width: number = 100
  @State opacity: number = 1
  
  build() {
    Column({ space: 20 }) {
      // åŠ¨ç”»ç›®æ ‡
      Column()
        .width(this.width)
        .height(100)
        .backgroundColor(Color.Blue)
        .opacity(this.opacity)
      
      Button('å¼€å§‹åŠ¨ç”»')
        .onClick(() => {
          animateTo({
            duration: 1000,           // æŒç»­æ—¶é—´
            curve: Curve.EaseInOut,   // åŠ¨ç”»æ›²çº¿
            iterations: 1,            // æ’­æ”¾æ¬¡æ•°
            playMode: PlayMode.Normal // æ’­æ”¾æ¨¡å¼
          }, () => {
            // ä¿®æ”¹çŠ¶æ€è§¦å‘åŠ¨ç”»
            this.width = 200
            this.opacity = 0.5
          })
        })
      
      Button('é‡ç½®')
        .onClick(() => {
          animateTo({ duration: 500 }, () => {
            this.width = 100
            this.opacity = 1
          })
        })
    }
    .width('100%')
    .padding(20)
  }
}
```

### å¤šå±æ€§åŠ¨ç”»

```typescript
@Entry
@Component
struct MultiPropertyAnimation {
  @State translateX: number = 0
  @State translateY: number = 0
  @State scale: number = 1
  @State rotate: number = 0
  
  startAnimation() {
    animateTo({
      duration: 1500,
      curve: Curve.EaseInOut,
      onFinish: () => {
        console.log('åŠ¨ç”»å®Œæˆ')
      }
    }, () => {
      this.translateX = 100
      this.translateY = 50
      this.scale = 1.5
      this.rotate = 360
    })
  }
  
  build() {
    Column() {
      // åŠ¨ç”»ç›®æ ‡
      Column()
        .width(100)
        .height(100)
        .backgroundColor(Color.Red)
        .translate({ x: this.translateX, y: this.translateY })
        .scale({ x: this.scale, y: this.scale })
        .rotate({ angle: this.rotate })
      
      Button('å¼€å§‹åŠ¨ç”»')
        .margin({ top: 100 })
        .onClick(() => {
          this.startAnimation()
        })
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }
}
```

## âœ¨ æ˜¾å¼åŠ¨ç”»

### animation ç»„ä»¶åŠ¨ç”»

```typescript
@Entry
@Component
struct ExplicitAnimation {
  @State flag: boolean = false
  
  build() {
    Column({ space: 30 }) {
      Column()
        .width(100)
        .height(100)
        .backgroundColor(this.flag ? Color.Blue : Color.Red)
        .animation({
          duration: 800,
          curve: Curve.Ease,
          iterations: 1
        })
      
      Button('åˆ‡æ¢é¢œè‰²')
        .onClick(() => {
          this.flag = !this.flag
        })
    }
    .width('100%')
    .padding(20)
  }
}
```

### é“¾å¼åŠ¨ç”»

```typescript
@Entry
@Component
struct ChainAnimation {
  @State offsetX: number = 0
  @State offsetY: number = 0
  @State color: Color = Color.Red
  
  async startChainAnimation() {
    // ç¬¬ä¸€æ­¥ï¼šå‘å³ç§»åŠ¨
    animateTo({ duration: 500 }, () => {
      this.offsetX = 100
    })
    
    await this.delay(500)
    
    // ç¬¬äºŒæ­¥ï¼šå‘ä¸‹ç§»åŠ¨
    animateTo({ duration: 500 }, () => {
      this.offsetY = 100
    })
    
    await this.delay(500)
    
    // ç¬¬ä¸‰æ­¥ï¼šå˜è‰²
    animateTo({ duration: 500 }, () => {
      this.color = Color.Blue
    })
  }
  
  delay(ms: number): Promise<void> {
    return new Promise(resolve => setTimeout(resolve, ms))
  }
  
  build() {
    Column() {
      Column()
        .width(50)
        .height(50)
        .backgroundColor(this.color)
        .translate({ x: this.offsetX, y: this.offsetY })
      
      Button('é“¾å¼åŠ¨ç”»')
        .margin({ top: 200 })
        .onClick(() => {
          this.startChainAnimation()
        })
    }
    .width('100%')
    .height('100%')
  }
}
```

## ğŸ”„ è½¬åœºåŠ¨ç”»

### é¡µé¢è½¬åœº

```typescript
@Entry
@Component
struct PageTransitionDemo {
  @State show: boolean = true
  
  build() {
    Column() {
      if (this.show) {
        Column()
          .width(200)
          .height(200)
          .backgroundColor(Color.Blue)
          .transition({
            type: TransitionType.Insert,
            opacity: 0,
            translate: { x: -100 },
            scale: { x: 0.5, y: 0.5 }
          })
          .transition({
            type: TransitionType.Delete,
            opacity: 0,
            translate: { x: 100 },
            scale: { x: 0.5, y: 0.5 }
          })
      }
      
      Button(this.show ? 'éšè—' : 'æ˜¾ç¤º')
        .margin({ top: 50 })
        .onClick(() => {
          animateTo({ duration: 500 }, () => {
            this.show = !this.show
          })
        })
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }
}
```

### å…±äº«å…ƒç´ è½¬åœº

```typescript
// é¡µé¢ A
@Entry
@Component
struct PageA {
  build() {
    Column() {
      Image($r('app.media.image'))
        .width(100)
        .height(100)
        .sharedTransition('sharedImage', {
          duration: 800,
          curve: Curve.Smooth
        })
        .onClick(() => {
          router.pushUrl({ url: 'pages/PageB' })
        })
    }
  }
}

// é¡µé¢ B
@Entry
@Component
struct PageB {
  build() {
    Column() {
      Image($r('app.media.image'))
        .width(300)
        .height(300)
        .sharedTransition('sharedImage', {
          duration: 800,
          curve: Curve.Smooth
        })
    }
  }
}
```

## ğŸ“Š åŠ¨ç”»æ›²çº¿

### å†…ç½®æ›²çº¿

```typescript
@Entry
@Component
struct CurveDemo {
  @State offset: number = 0
  
  animateWithCurve(curve: Curve) {
    this.offset = 0
    animateTo({
      duration: 1000,
      curve: curve
    }, () => {
      this.offset = 200
    })
  }
  
  build() {
    Column({ space: 20 }) {
      // åŠ¨ç”»ç›®æ ‡
      Column()
        .width(50)
        .height(50)
        .backgroundColor(Color.Red)
        .translate({ x: this.offset })
      
      // æ›²çº¿é€‰æ‹©
      Button('Linear - çº¿æ€§')
        .onClick(() => this.animateWithCurve(Curve.Linear))
      
      Button('Ease - ç¼“åŠ¨')
        .onClick(() => this.animateWithCurve(Curve.Ease))
      
      Button('EaseIn - ç¼“å…¥')
        .onClick(() => this.animateWithCurve(Curve.EaseIn))
      
      Button('EaseOut - ç¼“å‡º')
        .onClick(() => this.animateWithCurve(Curve.EaseOut))
      
      Button('EaseInOut - ç¼“å…¥ç¼“å‡º')
        .onClick(() => this.animateWithCurve(Curve.EaseInOut))
      
      Button('FastOutSlowIn - å¿«å‡ºæ…¢å…¥')
        .onClick(() => this.animateWithCurve(Curve.FastOutSlowIn))
      
      Button('Spring - å¼¹ç°§')
        .onClick(() => this.animateWithCurve(Curve.Spring))
    }
    .width('100%')
    .padding(20)
  }
}
```

### è‡ªå®šä¹‰æ›²çº¿

```typescript
// ä¸‰æ¬¡è´å¡å°”æ›²çº¿
const customCurve = curves.cubicBezierCurve(0.25, 0.1, 0.25, 1)

animateTo({
  duration: 1000,
  curve: customCurve
}, () => {
  this.width = 200
})
```

## ğŸ¯ å®æˆ˜æ¡ˆä¾‹ï¼šå¡ç‰‡ç¿»è½¬åŠ¨ç”»

```typescript
@Entry
@Component
struct CardFlip {
  @State rotateY: number = 0
  @State isFlipped: boolean = false
  
  flipCard() {
    animateTo({
      duration: 600,
      curve: Curve.EaseInOut
    }, () => {
      this.rotateY = this.isFlipped ? 0 : 180
      this.isFlipped = !this.isFlipped
    })
  }
  
  build() {
    Column() {
      Stack() {
        // æ­£é¢
        Column() {
          Text('æ­£é¢')
            .fontSize(32)
            .fontColor(Color.White)
        }
        .width(200)
        .height(300)
        .backgroundColor(Color.Blue)
        .borderRadius(20)
        .justifyContent(FlexAlign.Center)
        .rotate({ y: 1, angle: this.rotateY })
        .visibility(this.rotateY < 90 ? Visibility.Visible : Visibility.Hidden)
        
        // èƒŒé¢
        Column() {
          Text('èƒŒé¢')
            .fontSize(32)
            .fontColor(Color.White)
        }
        .width(200)
        .height(300)
        .backgroundColor(Color.Red)
        .borderRadius(20)
        .justifyContent(FlexAlign.Center)
        .rotate({ y: 1, angle: this.rotateY - 180 })
        .visibility(this.rotateY >= 90 ? Visibility.Visible : Visibility.Hidden)
      }
      
      Button('ç¿»è½¬')
        .margin({ top: 50 })
        .onClick(() => {
          this.flipCard()
        })
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }
}
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æ€§èƒ½ä¼˜åŒ–

```typescript
// âœ… ä¼˜å…ˆä½¿ç”¨ transform å±æ€§ï¼ˆGPU åŠ é€Ÿï¼‰
.translate()
.scale()
.rotate()

// âŒ é¿å…é¢‘ç¹æ”¹å˜å¸ƒå±€å±æ€§
.width()
.height()
```

### 2. åˆç†è®¾ç½®æ—¶é•¿

```typescript
// âœ… çŸ­åŠ¨ç”»ï¼š200-300ms
// âœ… æ ‡å‡†åŠ¨ç”»ï¼š300-500ms
// âœ… é•¿åŠ¨ç”»ï¼š500-1000ms
// âŒ é¿å…è¶…è¿‡ 1000ms
```

### 3. åŠ¨ç”»ç»“æŸå›è°ƒ

```typescript
animateTo({
  duration: 500,
  onFinish: () => {
    // æ¸…ç†å·¥ä½œ
    console.log('åŠ¨ç”»å®Œæˆ')
  }
}, () => {
  this.width = 200
})
```

## ğŸ“š å‚è€ƒèµ„æº

- [åŠ¨ç”»](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-animation-overview-0000001820880269-V5)
- [å±æ€§åŠ¨ç”»](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-attribute-animation-apis-0000001821000237-V5)
- [è½¬åœºåŠ¨ç”»](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/arkts-transition-animation-0000001820999333-V5)

---

**ä¸‹ä¸€èŠ‚** â†’ [Canvas ç»˜å›¾](02-Canvasç»˜å›¾.md)
