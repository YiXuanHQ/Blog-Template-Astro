---
title: å†…å­˜ä¸ç”µé‡ä¼˜åŒ–
date: 2025-01-22
prevChapter: "harmonyos-dev/15-performance-optimization/02-æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"
parentChapter: "harmonyos-dev/15-performance-optimization/README"
---
# å†…å­˜ä¸ç”µé‡ä¼˜åŒ–

> ä¼˜åŒ–å†…å­˜å’Œç”µé‡ä½¿ç”¨

## ğŸ’¾ å†…å­˜ç®¡ç†

### åŠæ—¶é‡Šæ”¾èµ„æº

```typescript
@Entry
@Component
struct MemoryOptimized {
  private player: AVPlayer | undefined
  
  aboutToDisappear() {
    // âœ… é‡Šæ”¾èµ„æº
    if (this.player) {
      this.player.release()
      this.player = undefined
    }
  }
}
```

### é¿å…å†…å­˜æ³„æ¼

```typescript
// âœ… å–æ¶ˆå®šæ—¶å™¨
aboutToDisappear() {
  if (this.timerId >= 0) {
    clearInterval(this.timerId)
  }
}

// âœ… ç§»é™¤ç›‘å¬å™¨
aboutToDisappear() {
  eventBus.off('event', this.handler)
}
```

## ğŸ”‹ ç”µé‡ä¼˜åŒ–

### åå°ä»»åŠ¡ç®¡ç†

```typescript
import { backgroundTaskManager } from '@kit.BackgroundTasksKit'

// ç”³è¯·åå°ä»»åŠ¡
backgroundTaskManager.requestBackgroundRunning(context, {
  bgMode: backgroundTaskManager.BackgroundMode.DATA_TRANSFER
}, (err) => {
  if (!err) {
    console.log('åå°ä»»åŠ¡å·²å¯åŠ¨')
  }
})

// åœæ­¢åå°ä»»åŠ¡
backgroundTaskManager.stopBackgroundRunning(context)
```

### æ™ºèƒ½æ›´æ–°ç­–ç•¥

```typescript
class SmartUpdateManager {
  async shouldUpdate(): Promise<boolean> {
    // æ£€æŸ¥ç”µé‡
    if (batteryLevel < 20) {
      return false
    }
    
    // æ£€æŸ¥ç½‘ç»œ
    if (isOnMobileData) {
      return false
    }
    
    return true
  }
}
```

## ğŸ“š å‚è€ƒèµ„æº

- [å†…å­˜ç®¡ç†](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/memory-management-0000001820880781-V5)
- [ç”µé‡ä¼˜åŒ–](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/battery-optimization-0000001774280838-V5)

---

**ç¬¬15ç« å®Œæˆï¼** ç»§ç»­å­¦ä¹  â†’ [ç¬¬16ç« ï¼šæµ‹è¯•ä¸DevOps](../16-testing-devops/)
